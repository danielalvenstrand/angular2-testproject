<div class="container forfest">

    <div class="row">
        <h1>Förfestställen</h1>
        <br>
        <ul class="nav nav-pills nav-justified">
            <li (click)='showMap=true' [class.active]='showMap'><a><span class="glyphicon glyphicon-map-marker"></span></a></li>
            <li (click)='showMap=false' [class.active]='!showMap'><a><span class="glyphicon glyphicon-list"></span></a></li>
        </ul>
        <hr />
        <div [hidden]='showMap'>
            <label for="filter" class="label label-default">Namn</label>
            <div class="input-group">
                <span class="input-group-addon clickable" (click)='order=!order'><span [class]='order?"glyphicon glyphicon-menu-up":"glyphicon glyphicon-menu-down"'></span></span>
                <input type="text" class="form-control" id="filter" [(ngModel)]='filter' placeholder="Filter..." /><br>
                <span class="input-group-addon">Visar {{countFiltered()}} av {{places.length}} förfestställen.</span>
            </div>
            <div class="row" *ngIf='!showMap'>
                <place-component *ngFor='let place of places | filterPlaces: filter:order' [place]='place' [filter]='filter'></place-component>
            </div>
        </div>
    </div>
    <div [hidden]='!showMap'>
        <div class="row">
            <div class="col-lg-12">
                <div class="input-group">
                    <label class="checkbox-inline"><input type="checkbox" value="" [(ngModel)]='placeTypes.bars'>Barer</label>
                    <label class="checkbox-inline"><input type="checkbox" value="" [(ngModel)]='placeTypes.night_clubs'>Nattklubbar</label>
                    <label class="checkbox-inline"><input type="checkbox" value="" [(ngModel)]='placeTypes.restaurants'>Restauranger</label>
                </div>
            </div>
            <div class="col-lg-12">
            <br>
            </div>
            <div class="col-lg-6">
                <label for="searchBox" class="label label-default">Sök ställe</label>
                <div class="input-group">
                    <input id="searchBox" class="form-control" type="text" placeholder="Sök" (keyup.enter)='update.click()'>
                    <span class="input-group-addon">Visar {{places.length}} förfestställen.</span>
                </div>
            </div>
            <br />
            <div class="col-lg-6">
                <label for="radius" class="label label-default">Radie (m)</label>
                <div class="input-group">
                    <input type="number" min="1" max="1000" class="form-control" id="radius" [(ngModel)]='radius' (keyup.enter)='update.click()' placeholder="Radie (m)..." /><br>
                    <span class="input-group-addon clickable" (click)='setMap(location.lat,location.lng)' #update><span class="glyphicon glyphicon-refresh"></span></span>
                </div>
            </div>

        </div>
        <br />
        <div class="row">
            <div class="place-box panel panel-default">

                <div class="panel-body">

                    <div id="map"></div>
                </div>
                <div class="panel-footer">
                    <span class="glyphicon glyphicon-refresh glyphicon-refresh-animate pull-right" *ngIf='loadMap'></span>
                    <p>Latitue: {{location.lat}}<br/>Longitude: {{location.lng}}</p>

                </div>
            </div>
        </div>
    </div>
</div>